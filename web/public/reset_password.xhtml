<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <ui:insert name="head" ><ui:include src="../head.xhtml" /></ui:insert>
    </h:head>
    <h:body>
        <ui:insert name="header2" ><ui:include src="../header2.xhtml" /></ui:insert>
        
        <main class="mt-5 mb-5">
            <style>  .ui-growl-item {  margin-top: 100px;}  </style>
            <p:growl id="growl1" showDetail="true" globalOnly="true" life="3000"  sticky="false"/>  
            <div class="container">
                <div class="row">
                    <div class="col mb-2">
                        <h:panelGroup rendered="#{commonBean.resetPassword_msg == 1}">
                            <div class="alert alert-danger alert-dismissible fade show" role="alert" style="font-size: 1.3rem">
                                <strong >Şifre değiştirme gerekli !</strong> <br/>
                                İşlemlerinize devam etmeden önce lütfen şifrenizi değiştiriniz.
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                             </div>
                        </h:panelGroup>
                    </div>
                </div>
                <div class="row"><div class="col"><h3 class="mb-4">Şifre Değiştirme</h3></div></div>
                <div class="row">
                    <div class="col-12 col-md-6 mb-4 mb-md-0">
                        <div class="sifre-card">
                            <p style="line-height: 30px;"><div style="margin-right: 15px;display: inline-block;width: 25px;line-height: 25px; border-radius: 50%; text-align: center; font-size: 18px; border: 1px solid #1a1919;color: #1a1919">1</div>Aşağıdaki alana hesabınız için kullandığınız GSM telefon numarasını yazınız ve GSM telefonunuza SMS onay kodu isteyiniz.</p>
                            <p class="text-orange">*Bir saat içinde en fazla 3 adet şifre değiştirme talebinde bulunabilirsiniz. 3 den fazla şifre değiştirme talebinde bulunursanız şifre değiştirme özelliği size kapatılır. </p>
                            <p class="text-orange">*GSM numaranıza gönderilen SMS onay kodları en fazla 1 saat geçerlidir. SMS onay kodu aldıktan sonra hemen işleminize devam etmenizi öneririz. </p>
                            <div class="form">
                                <h:form id="resetPassword1" prependId="false">
                                    <div class="form-group row ">
                                        <label for="resetPasswordGsmNoInput" class="col-sm-6 col-md-2 col-form-label font-weight-bold">Gsm</label>
                                        <div class="col-sm-6 col-md-5 mb-2">
                                            <script>function ltr(element){if(element.setSelectionRange){ element.setSelectionRange(0,0);}}</script>
                                            <p:inputMask id="resetPasswordGsmNoInput"   
                                                         style="border: 1px solid #ddd"
                                                         onclick="ltr(this);"
                                                         class=" form-control form-control-sm m-input"
                                                         value="#{resetPasswordBean.resetPassword_GsmNo}"
                                                         required="true"
                                                         requiredMessage="Lütfen Cep telefon numaranızı yazınız"
                                                         mask="0(599)-999-9999">
                                            </p:inputMask>
                                            <h:message for="resetPasswordGsmNoInput" class="message-f"></h:message>
                                        </div>
                                        <div class="col-sm-6 col-md-5 align-items-end">
                                              <script>
                                                $(document).ready(function () { $("#sendCodeButton").on("click", function() { $(this).attr("disabled", "true"); doWork(); }); });
                                                function doWork() { $("#ddd").css("display", "block"); $("#sendCodeButton").css("display", "none"); setTimeout('$("#sendCodeButton").removeAttr("disabled")', 2000); } 
                                            </script> 
                                            <div id="ddd" 
                                                 style="display: none; cursor: default; " 
                                                 class="btn btn-form w-100">
                                                <i class="fa fa-exclamation-triangle"></i>&nbsp;Lütfen Bekleyin..
                                            </div>
                                            <h:commandLink class="btn btn-form w-100"  
                                                           id="sendCodeButton"
                                                           style="width: 100%"
                                                           action="#{resetPasswordBean.sendResetPasswordSmsCode()}">
                                                Kod Gönder
                                            </h:commandLink>
                                        </div>
                                        
                                        
                                       
                                        
                                    </div> 
                                </h:form>    
                            </div>
                            <hr style="margin-top: 20px; margin-bottom: 20px;"/>

                            <p style="line-height: 30px;"><div style="margin-right: 15px;display: inline-block;width: 25px;line-height: 25px; border-radius: 50%; text-align: center; font-size: 18px; border: 1px solid #1a1919;color: #1a1919">2</div>Aşağıdaki alana GSM telefonunuza gelen SMS onay kodunu yazınız ve onaylatınız.</p>
                            <div class="form">
                                <h:form id="accountActivationForm" prependId="false">
                                    <div class="form-group row">
                                        <label for="inputSmsOnayKodu" class="col-sm-6 col-md-6 col-form-label font-weight-bold">SMS Onay Kodunuz</label>
                                        <div class="col-sm-6 col-md-6 mb-2">
                                            <h:inputText style="border: 1px solid #ddd"
                                                         id="inputSmsOnayKodu" 
                                                         value="#{resetPasswordBean.resetPassword_SmsOnayKodu}"
                                                         class=" form-control"
                                                         required="true"
                                                         requiredMessage="Bu alan gereklidir">
                                            </h:inputText>
                                            <h:message for="inputSmsOnayKodu" class="message-f" ></h:message>
                                        </div>
                                       
                                    </div>    
                                    <div class="form-group row">    
                                        <label for="inputSecretPassword" class="col-sm-6 col-md-6 col-form-label font-weight-bold">Yeni Şifreniz</label>
                                        <div class="col-sm-6 col-md-6 mb-2">
                                            <f:event listener="#{resetPasswordBean.passwordMatch}" type="postValidate" />
                                            <h:inputSecret  style="border: 1px solid #ddd"
                                                            id="inputSecretPassword"
                                                            value="#{resetPasswordBean.resetPassword_Password}"
                                                            class=" form-control"
                                                            required="true"
                                                            requiredMessage="Bu alan gereklidir">
                                            </h:inputSecret>
                                            <h:message for="inputSecretPassword" class="message-f" ></h:message>
                                        </div>
                                    </div>    
                                    <div class="form-group row">   
                                        <label for="inputSecretPasswordAgain" class="col-sm-6 col-md-6  col-form-label font-weight-bold">Yeni Şifreniz(Tekrar)</label>
                                        <div class="col-sm-6 col-md-6 mb-2">
                                            <h:inputSecret  style="border: 1px solid #ddd"
                                                            id="inputSecretPasswordAgain"
                                                            value="#{resetPasswordBean.resetPassword_PasswordAgain}"
                                                            class=" form-control"
                                                            required="true"
                                                            requiredMessage="Bu alan gereklidir">
                                            </h:inputSecret>
                                            <h:message for="inputSecretPasswordAgain" class="message-f" ></h:message>
                                        </div>
                                    </div>    
                                    <div class="form-group row">     
                                        <div class="col-5 align-items-start">
                                            <h:commandLink class="btn btn-form w-100" 
                                                           style="width: 100%"
                                                           action="#{resetPasswordBean.resetPassword()}">
                                                Onayla
                                            </h:commandLink>
                                        </div>
                                    </div>
                                </h:form>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 mb-5 mb-md-0">
                        <div class="sifre-card">
                            <p class="title-bold">Giriş Yaparken Sorun mu Yaşıyorsun?</p>
                            <p>Üyelerimize özel hizmetlerinden faydalanmak için oturum açmanız gerekmektedir, oturum açma işlemlerinde şifreniz kullanılır. Şifrenizi güvenlik nedenleriyle veya unuttuysanız bu ekrandan sıfırlayabilirsiniz. </p>
                            <p>Şifrenizi sıfırlamayla ilgili sorun yaşıyorsanız veya hesabınızda oturum açamıyorsanız daha fazla yardım için destek@tasimacilar.com e-mail adresi üzerinden bize ulaşabilirsiniz. </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <ui:insert name="footer" ><ui:include src="../footer.xhtml" /></ui:insert>
        <ui:insert name="scripts" ><ui:include src="../scripts.xhtml" /></ui:insert>
    </h:body>
</html>

